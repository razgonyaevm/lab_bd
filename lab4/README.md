## Вариант `9`

| .pdf                             | .docx                             | first task                   |
|----------------------------------|-----------------------------------|------------------------------|
| [report](./docs/report_lab3.pdf) | [report](./docs/report_lab3.docx) | [sql_code](./first_task.sql) |

**Задание.**

По варианту, выданному преподавателем, составить и выполнить запросы к базе данных "Учебный процесс".

Команда для подключения к базе данных ucheb: `psql -h pg -d ucheb`

**Составить запросы на языке SQL (пункты 1-2).**

Для каждого запроса предложить индексы, добавление которых уменьшит время выполнения запроса (указать таблицы/атрибуты,
для которых нужно добавить индексы, написать тип индекса; объяснить, почему добавление индекса будет полезным для
данного запроса).

Для запросов 1-2 необходимо составить возможные планы выполнения запросов. Планы составляются на основании
предположения, что в таблицах отсутствуют индексы. Из составленных планов необходимо выбрать оптимальный и объяснить
свой выбор.
Изменятся ли планы при добавлении индекса и как?

Для запросов 1-2 необходимо добавить в отчет вывод команды `EXPLAIN ANALYZE [запрос]`

Подробные ответы на все вышеперечисленные вопросы должны присутствовать в отчете (планы выполнения запросов должны быть
нарисованы, ответы на вопросы - представлены в текстовом виде).

    1. Сделать запрос для получения атрибутов из указанных таблиц, применив фильтры по указанным условиям:
    Н_ТИПЫ_ВЕДОМОСТЕЙ, Н_ВЕДОМОСТИ.
    Вывести атрибуты: Н_ТИПЫ_ВЕДОМОСТЕЙ.ИД, Н_ВЕДОМОСТИ.ЧЛВК_ИД.
    Фильтры (AND):
    a) Н_ТИПЫ_ВЕДОМОСТЕЙ.ИД > 2.
    b) Н_ВЕДОМОСТИ.ИД = 1426978.
    Вид соединения: LEFT JOIN.
    
    2. Сделать запрос для получения атрибутов из указанных таблиц, применив фильтры по указанным условиям:
    Таблицы: Н_ЛЮДИ, Н_ОБУЧЕНИЯ, Н_УЧЕНИКИ.
    Вывести атрибуты: Н_ЛЮДИ.ИМЯ, Н_ОБУЧЕНИЯ.НЗК, Н_УЧЕНИКИ.НАЧАЛО.
    Фильтры: (AND)
    a) Н_ЛЮДИ.ФАМИЛИЯ > Афанасьев.
    b) Н_ОБУЧЕНИЯ.ЧЛВК_ИД = 105590.
    c) Н_УЧЕНИКИ.НАЧАЛО = 1996-09-01.
    Вид соединения: INNER JOIN.

**Отчёт по лабораторной работе должен содержать:**

    1. Текст задания.
    2. Реализацию запросов на SQL.
    3. Планы выполнения запросов.
    4. Ответы на вопросы, представленные в задании.
    5. Выводы по работе.

**Темы для подготовки к защите лабораторной работы:**

    1. Индексы
    2. Оптимизация запросов
    3. Выбор плана выполнения запросов